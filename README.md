# Restaurant DB GUI

Простой графический интерфейс на Python для работы с PostgreSQL базой из `init.sql` / `docker-compose.yml`.

## Быстрый старт
1. Создайте `.env` рядом с `app.py`:
   ```
   DB_HOST=localhost
   DB_PORT=5432
   DB_NAME=restaurant_management
   DB_USER=restaurant_admin
   DB_PASSWORD=secure_password_123
   ```
2. Запустите БД: `docker-compose up -d`
3. Установите зависимости: `python -m pip install -r requirements.txt`
4. Запустите клиент: `python app.py`

## Что умеет
- Подключение к БД (поля заранее заполнены значениями из `docker-compose.yml`). Есть кнопка Exit для выхода из приложения.
- Авторизация пользователей из таблицы `users` с проверкой bcrypt-хеша, выбором роли и ресторана; регистрация новых пользователей доступна только админу (назначение роли и ресторана для роли).
- Вкладка *Tables*: список таблиц public-схемы, загрузка с опциональным WHERE и LIMIT, экспорт в CSV, добавление записи (только админ).
- Вкладка *Query*: произвольные SQL; SELECT выводится в таблицу, DDL/DML показывает количество затронутых строк.
- Вкладка *Inventory* (менеджер/админ/шеф): просмотр запасов по ресторану, обновление количества и срока годности, создание заявок на закупку.
- Вкладка *Orders* (менеджер/админ/официант/шеф): просмотр заказов с фильтрами, создание заказа, добавление позиций.
- Вкладка *Menu*: фильтры по блюдам (ресторан, категория, доступность, цена, ключевое слово).
- Вкладка *Reports*: базовые отчёты (заказы по ресторанам, топ-блюда, минимальные остатки, скоро истекающие, заказы по статусам).

## Полезные заметки
- Для политики RLS укажите роль/ресторан в форме подключения (например, role=`manager`, restaurant_id=`1`).
- Пример запроса: `SELECT * FROM dishes WHERE restaurant_id = 1 LIMIT 50;`
- По умолчанию запросы выполняются в autocommit.

